(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[70],{310:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/verify-email",function(){return r(2370)}])},2370:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var s=r(5893),i=r(7294),l=r(1163),n=r(9008),a=r.n(n),o=r(1664),c=r.n(o),d=r(11);function u(){let e=(0,l.useRouter)(),{token:t}=e.query,{user:r}=(0,d.aC)(),[n,o]=(0,i.useState)("verifying"),[u,h]=(0,i.useState)(""),[x,m]=(0,i.useState)(!1),[p,f]=(0,i.useState)("");(0,i.useEffect)(()=>{e.isReady&&(t?b(t):(o("no-token"),h("No verification token provided. Please check your email for the verification link.")))},[e.isReady,t]);let b=async t=>{try{o("verifying");let r=await fetch("".concat("http://localhost:5000","/api/auth/verify-email"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t})}),s=await r.json();s.success?(o("success"),h(s.message||"Email verified successfully!"),setTimeout(()=>{e.push("/dashboard")},3e3)):(o("error"),h(s.message||"Verification failed. Please try again."))}catch(e){console.error("Verification error:",e),o("error"),h("An error occurred during verification. Please try again.")}},j=async e=>{if(e.preventDefault(),!p){h("Please enter your email address.");return}m(!0);try{let e=await fetch("".concat("http://localhost:5000","/api/auth/resend-verification"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:p})}),t=await e.json();t.success?(h("Verification email sent! Please check your inbox."),o("resent")):h(t.message||"Failed to send verification email.")}catch(e){console.error("Resend error:",e),h("An error occurred. Please try again.")}finally{m(!1)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(a(),{children:[(0,s.jsx)("title",{children:"Verify Email | Nexora Fraud Predictor"}),(0,s.jsx)("meta",{name:"description",content:"Verify your email address"})]}),(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 px-4",children:(0,s.jsxs)("div",{className:"max-w-md w-full",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-white flex items-center justify-center gap-2",children:"\uD83D\uDEE1️ Nexora"}),(0,s.jsx)("p",{className:"text-purple-300 mt-2",children:"Fraud Predictor & Protection"})]}),(0,s.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 shadow-xl border border-white/20",children:["verifying"===n&&(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full mx-auto mb-4"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-white mb-2",children:"Verifying Your Email"}),(0,s.jsx)("p",{className:"text-purple-200",children:"Please wait while we verify your email address..."})]}),"success"===n&&(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-white mb-2",children:"Email Verified! ✓"}),(0,s.jsx)("p",{className:"text-green-300 mb-4",children:u}),(0,s.jsx)("p",{className:"text-purple-200 text-sm",children:"Redirecting to dashboard in 3 seconds..."}),(0,s.jsx)(c(),{href:"/dashboard",className:"inline-block mt-4 px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:"Go to Dashboard"})]}),"error"===n&&(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-white mb-2",children:"Verification Failed"}),(0,s.jsx)("p",{className:"text-red-300 mb-6",children:u}),(0,s.jsxs)("div",{className:"bg-white/5 rounded-lg p-4 mt-4",children:[(0,s.jsx)("p",{className:"text-purple-200 text-sm mb-3",children:"Request a new verification link:"}),(0,s.jsxs)("form",{onSubmit:j,className:"space-y-3",children:[(0,s.jsx)("input",{type:"email",placeholder:"Enter your email",value:p,onChange:e=>f(e.target.value),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0}),(0,s.jsx)("button",{type:"submit",disabled:x,className:"w-full px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-800 text-white rounded-lg transition-colors",children:x?"Sending...":"Resend Verification Email"})]})]})]}),"no-token"===n&&(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-white mb-2",children:"No Verification Token"}),(0,s.jsx)("p",{className:"text-yellow-300 mb-6",children:u}),(0,s.jsxs)("div",{className:"bg-white/5 rounded-lg p-4 mt-4",children:[(0,s.jsx)("p",{className:"text-purple-200 text-sm mb-3",children:"Request a verification link:"}),(0,s.jsxs)("form",{onSubmit:j,className:"space-y-3",children:[(0,s.jsx)("input",{type:"email",placeholder:"Enter your email",value:p,onChange:e=>f(e.target.value),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0}),(0,s.jsx)("button",{type:"submit",disabled:x,className:"w-full px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-800 text-white rounded-lg transition-colors",children:x?"Sending...":"Send Verification Email"})]})]})]}),"resent"===n&&(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-blue-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-white mb-2",children:"Email Sent!"}),(0,s.jsx)("p",{className:"text-blue-300 mb-4",children:u}),(0,s.jsx)("p",{className:"text-purple-200 text-sm",children:"Please check your inbox and spam folder."})]}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsx)(c(),{href:"/login",className:"text-purple-300 hover:text-white text-sm transition-colors",children:"← Back to Login"})})]})]})})]})}}},function(e){e.O(0,[814,774,888,179],function(){return e(e.s=310)}),_N_E=e.O()}]);
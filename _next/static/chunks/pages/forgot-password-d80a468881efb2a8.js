(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[742],{2036:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/forgot-password",function(){return t(2244)}])},2244:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return m}});var r=t(5893),a=t(7294),o=t(1163),l=t(1664),i=t.n(l),n=t(4033),d=t(7530),c=t(6501),u=t(7219);function m(){let e=(0,o.useRouter)(),[s,t]=(0,a.useState)(1),[l,m]=(0,a.useState)(!1),[p,x]=(0,a.useState)(!1),[h,f]=(0,a.useState)(""),[g,w]=(0,a.useState)(""),[b,y]=(0,a.useState)(""),[v,j]=(0,a.useState)(""),[N,P]=(0,a.useState)({}),k=async e=>{if(e.preventDefault(),!h.trim()){P({email:"Email is required"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h)){P({email:"Please enter a valid email"});return}m(!0),P({});try{let e=await d.ZP.post("/auth/forgot-password",{email:h});e.data.success?(c.ZP.success("OTP sent to your email! (Check console for demo OTP)"),t(2)):c.ZP.error(e.data.message||"Failed to send OTP")}catch(e){var s,r;c.ZP.error((null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||"Failed to send OTP")}finally{m(!1)}},C=async e=>{if(e.preventDefault(),!g.trim()||6!==g.length){P({otp:"Please enter a valid 6-digit OTP"});return}m(!0),P({});try{let e=await d.ZP.post("/auth/verify-reset-otp",{email:h,otp:g});e.data.success?(c.ZP.success("OTP verified! Set your new password."),t(3)):c.ZP.error(e.data.message||"Invalid OTP")}catch(e){var s,r;c.ZP.error((null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||"Invalid OTP")}finally{m(!1)}},S=async s=>{s.preventDefault();let t={};if(b?b.length<6&&(t.newPassword="Password must be at least 6 characters"):t.newPassword="Password is required",b!==v&&(t.confirmPassword="Passwords do not match"),Object.keys(t).length>0){P(t);return}m(!0),P({});try{let s=await d.ZP.post("/auth/reset-password",{email:h,otp:g,newPassword:b});s.data.success?(c.ZP.success("Password reset successful! Please login."),e.push("/login")):c.ZP.error(s.data.message||"Failed to reset password")}catch(e){var r,a;c.ZP.error((null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||"Failed to reset password")}finally{m(!1)}};return(0,r.jsx)(n.Z,{title:"Forgot Password",children:(0,r.jsx)("div",{className:"min-h-[80vh] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 bg-gradient-to-br from-gray-50 to-purple-50",children:(0,r.jsxs)("div",{className:"w-full max-w-md",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-purple-500/30",children:(0,r.jsx)(u.o1l,{className:"w-8 h-8 text-white"})}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Reset Password"}),(0,r.jsxs)("p",{className:"text-gray-600 mt-2",children:[1===s&&"Enter your email to receive a reset code",2===s&&"Enter the 6-digit code sent to your email",3===s&&"Create your new password"]})]}),(0,r.jsx)("div",{className:"flex items-center justify-center mb-8",children:[1,2,3].map(e=>(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center text-sm font-bold shadow-lg ".concat(s>=e?"bg-gradient-to-br from-purple-500 to-indigo-600 text-white shadow-purple-500/30":"bg-gray-200 text-gray-500"),children:s>e?(0,r.jsx)(u.UgA,{}):e}),e<3&&(0,r.jsx)("div",{className:"w-12 h-1 rounded-full ".concat(s>e?"bg-gradient-to-r from-purple-500 to-indigo-600":"bg-gray-200")})]},e))}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[1===s&&(0,r.jsxs)("form",{onSubmit:k,className:"space-y-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(u.Imn,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,r.jsx)("input",{id:"email",type:"email",value:h,onChange:e=>f(e.target.value),placeholder:"you@example.com",className:"w-full pl-12 pr-4 py-3 border-2 rounded-xl transition-all outline-none focus:ring-4 ".concat(N.email?"border-red-500 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-purple-500 focus:ring-purple-100")})]}),N.email&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N.email})]}),(0,r.jsx)("button",{type:"submit",disabled:l,className:"w-full py-4 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white font-semibold rounded-xl shadow-lg shadow-purple-500/30 hover:shadow-purple-500/50 transition-all flex items-center justify-center gap-2 hover:scale-[1.02] disabled:opacity-50 disabled:hover:scale-100",children:l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.dAq,{className:"w-5 h-5 animate-spin"}),"Sending OTP..."]}):"Send Reset Code"})]}),2===s&&(0,r.jsxs)("form",{onSubmit:C,className:"space-y-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"otp",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Enter 6-Digit OTP"}),(0,r.jsx)("input",{id:"otp",type:"text",maxLength:6,value:g,onChange:e=>w(e.target.value.replace(/\D/g,"")),placeholder:"000000",className:"w-full px-4 py-4 text-center text-2xl tracking-widest font-mono border-2 rounded-xl transition-all outline-none focus:ring-4 ".concat(N.otp?"border-red-500 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-purple-500 focus:ring-purple-100")}),N.otp&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N.otp}),(0,r.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Check your email for the verification code."})]}),(0,r.jsx)("button",{type:"submit",disabled:l,className:"w-full py-4 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white font-semibold rounded-xl shadow-lg shadow-purple-500/30 hover:shadow-purple-500/50 transition-all flex items-center justify-center gap-2 hover:scale-[1.02] disabled:opacity-50 disabled:hover:scale-100",children:l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.dAq,{className:"w-5 h-5 animate-spin"}),"Verifying..."]}):"Verify Code"}),(0,r.jsx)("button",{type:"button",onClick:()=>t(1),className:"w-full text-gray-600 text-sm hover:text-purple-600 transition-colors",children:"← Back to email"})]}),3===s&&(0,r.jsxs)("form",{onSubmit:S,className:"space-y-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"newPassword",className:"block text-sm font-semibold text-gray-700 mb-2",children:"New Password"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(u.UIZ,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,r.jsx)("input",{id:"newPassword",type:p?"text":"password",value:b,onChange:e=>y(e.target.value),placeholder:"••••••••",className:"w-full pl-12 pr-12 py-3 border-2 rounded-xl transition-all outline-none focus:ring-4 ".concat(N.newPassword?"border-red-500 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-purple-500 focus:ring-purple-100")}),(0,r.jsx)("button",{type:"button",onClick:()=>x(!p),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:p?(0,r.jsx)(u.rzC,{className:"w-5 h-5"}):(0,r.jsx)(u.rDJ,{className:"w-5 h-5"})})]}),N.newPassword&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N.newPassword})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirm New Password"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(u.UIZ,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,r.jsx)("input",{id:"confirmPassword",type:p?"text":"password",value:v,onChange:e=>j(e.target.value),placeholder:"••••••••",className:"w-full pl-12 pr-4 py-3 border-2 rounded-xl transition-all outline-none focus:ring-4 ".concat(N.confirmPassword?"border-red-500 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-purple-500 focus:ring-purple-100")})]}),N.confirmPassword&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:N.confirmPassword})]}),(0,r.jsx)("button",{type:"submit",disabled:l,className:"w-full py-4 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white font-semibold rounded-xl shadow-lg shadow-purple-500/30 hover:shadow-purple-500/50 transition-all flex items-center justify-center gap-2 hover:scale-[1.02] disabled:opacity-50 disabled:hover:scale-100",children:l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.dAq,{className:"w-5 h-5 animate-spin"}),"Resetting..."]}):"Reset Password"})]}),(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsxs)(i(),{href:"/login",className:"text-sm text-gray-600 hover:text-purple-600 inline-flex items-center gap-1 transition-colors",children:[(0,r.jsx)(u.Ao2,{className:"w-4 h-4"}),"Back to Sign In"]})})]})]})})})}}},function(e){e.O(0,[814,219,33,774,888,179],function(){return e(e.s=2036)}),_N_E=e.O()}]);